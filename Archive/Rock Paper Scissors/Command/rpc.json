
{
    "name": "rpc",
    "permissions": "NONE",
    "restriction": "1",
    "_id": "MnEPM",
    "actions": [
      {
        "behavior": "1",
        "interpretation": "1",
        "code": "const Discord = require('discord.js');\nvar rpcEmotes = [\"🌑\", \"📃\", \"✂️\"];\nvar interval;\nvar emojiTimerRe = 0;\nvar mainMessage;\n\nvar embedTemplate = new Discord.RichEmbed({\n    color: 0x0000FF,\n    author: {\n        name: client.user.username,\n        icon_url: client.user.avatarURL\n    },\n    title: \"Rock Paper Scissors\",\n    description: `Rock (${rpcEmotes[0]}), Paper (${rpcEmotes[1]}), or Scissors (${rpcEmotes[2]})?\\n\\nReact below within 1 minute.`,\n    timestamp: new Date(),\n});\n\nmsg.channel.send(embedTemplate).then(async (message) => {\n    mainMessage = message;\n    interval = setInterval(function() {\n        emojiTimerInt(message, rpcEmotes);\n    }, 500)\n\n})\n\nfunction emojiTimerInt(message, subarray) {\n    message.react(subarray[emojiTimerRe]);\n    emojiTimerRe += 1;\n\n    if (emojiTimerRe == subarray.length) {\n        clearInterval(interval);\n\n        message.awaitReactions((reaction, user) => rpcEmotes.includes(reaction.emoji.name) && user.id == msg.author.id, {\n                time: 60000,\n                errors:['time'],\n                max:1\n            })\n            .then((collected) => {\n                var emojiReacted = collected.first()[\"emoji\"];\n                var emojiBot = rpcEmotes[Math.floor(Math.random() * rpcEmotes.length)];\n                \n                var rpcList = [emojiBot,emojiReacted[\"name\"]];\n\n                if (rpcList.includes(rpcEmotes[0]) && rpcList.includes(rpcEmotes[1])) { // Rock + Scissor\n                    if (emojiBot == rpcEmotes[0]) {\n                        win(emojiBot,emojiReacted[\"name\"]);\n                    } else {\n                        lose(emojiBot,emojiReacted[\"name\"]);\n                    }\n                } else if (rpcList.includes(rpcEmotes[1]) && rpcList.includes(rpcEmotes[2])) { // Paper + Scissor\n                    if (emojiBot == rpcEmotes[1]) {\n                        win(emojiBot,emojiReacted[\"name\"]);\n                    } else {\n                        lose(emojiBot,emojiReacted[\"name\"]);\n                    }\n                } else if (rpcList.includes(rpcEmotes[2]) && rpcList.includes(rpcEmotes[0])) { // Scissor + Rock\n                    if (emojiBot == rpcEmotes[2]) {\n                        win(emojiBot,emojiReacted[\"name\"]);\n                    } else {\n                        lose(emojiBot,emojiReacted[\"name\"]);\n                    }\n                } else { // Tie\n                    tie(emojiBot,emojiReacted[\"name\"]);\n                }\n            })\n            .catch((error) => {\n                var errorEmbed = new Discord.RichEmbed({\n                    color: 0xFF0000,\n                    author: {\n                        name: client.user.username,\n                        icon_url: client.user.avatarURL\n                    },\n                    title: \"Rock Paper Scissors\",\n                    description: \"You did not provide a reaction in time!\",\n                    timestamp: new Date(),\n                });\n\n                msg.channel.send(errorEmbed);\n            });\n    }\n}\n\nfunction win(botOption, playerOption) {\n    embedTemplate[\"description\"] = `Rock (${rpcEmotes[0]}), Paper (${rpcEmotes[1]}), or Scissors (${rpcEmotes[2]})?\\n\\nI chose ${botOption}\\nYou chose ${playerOption}\\n\\nYou win!`;\n    embedTemplate[\"color\"] = 0x00FF00;\n    mainMessage.edit(embedTemplate);\n}\n\nfunction lose(botOption, playerOption) {\n    embedTemplate[\"description\"] = `Rock (${rpcEmotes[0]}), Paper (${rpcEmotes[1]}), or Scissors (${rpcEmotes[2]})?\\n\\nI chose ${botOption}\\nYou chose ${playerOption}\\n\\nYou lose!`;\n    embedTemplate[\"color\"] = 0xFF0000;\n    mainMessage.edit(embedTemplate)\n}\n\nfunction tie(botOption, playerOption) {\n    embedTemplate[\"description\"] = `Rock (${rpcEmotes[0]}), Paper (${rpcEmotes[1]}), or Scissors (${rpcEmotes[2]})?\\n\\nI chose ${botOption}\\nYou chose ${playerOption}\\n\\nWe tied!`;\n    embedTemplate[\"color\"] = 0xFFFF00;\n    mainMessage.edit(embedTemplate)\n}",
        "storage": "0",
        "varName": "",
        "name": "Run Script"
      }
    ]
  }
  